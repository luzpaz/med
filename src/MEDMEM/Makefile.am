#  Copyright (C) 2007-2008  CEA/DEN, EDF R&D, OPEN CASCADE
#
#  Copyright (C) 2003-2007  OPEN CASCADE, EADS/CCR, LIP6, CEA/DEN,
#  CEDRAT, EDF R&D, LEG, PRINCIPIA R&D, BUREAU VERITAS
#
#  This library is free software; you can redistribute it and/or
#  modify it under the terms of the GNU Lesser General Public
#  License as published by the Free Software Foundation; either
#  version 2.1 of the License.
#
#  This library is distributed in the hope that it will be useful,
#  but WITHOUT ANY WARRANTY; without even the implied warranty of
#  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
#  Lesser General Public License for more details.
#
#  You should have received a copy of the GNU Lesser General Public
#  License along with this library; if not, write to the Free Software
#  Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307 USA
#
#  See http://www.salome-platform.org/ or email : webmaster.salome@opencascade.com
#
#  MED MEDMEM : MED files in memory
#
include $(top_srcdir)/adm_local/unix/make_common_starter.am

# first '.' says that this folder must be compiled before Test (MEDMEM/Test uses MEDMEM)
#if CPPUNIT_IS_OK
# SUBDIRS=. Test
#endif

#DIST_SUBDIRS= Test

lib_LTLIBRARIES= libmedmem.la

salomeinclude_HEADERS= \
MEDMEM_PointerOf.hxx \
MEDMEM_CellModel.hxx \
MEDMEM_Connectivity.hxx \
MEDMEM_Coordinate.hxx \
MEDMEM_define.hxx \
MEDMEM_DriversDef.hxx \
MEDMEM_DriverFactory.hxx \
MEDMEM_Family.hxx \
MEDMEM_Field.hxx \
MEDMEM_GenDriver.hxx \
MEDMEM_Group.hxx \
MEDMEM_Array.hxx \
MEDMEM_Exception.hxx \
MEDMEM_MedFieldDriver.hxx \
MEDMEM_AsciiFieldDriver.hxx \
MEDMEM_Med.hxx \
MEDMEM_MedMedDriver.hxx \
MEDMEM_MedMeshDriver.hxx \
MEDMEM_GibiMeshDriver.hxx \
MEDMEM_PorflowMeshDriver.hxx \
MEDMEM_DriverTools.hxx \
MEDMEM_ModulusArray.hxx \
MEDMEM_SkyLineArray.hxx \
MEDMEM_VtkMedDriver.hxx \
MEDMEM_VtkMeshDriver.hxx \
MEDMEM_VtkFieldDriver.hxx \
MEDMEM_Mesh.hxx \
MEDMEM_Meshing.hxx \
MEDMEM_STRING.hxx \
MEDMEM_Support.hxx \
MEDMEM_Unit.hxx \
MEDMEM_Grid.hxx \
MEDMEM_RCBase.hxx \
MEDMEM_medimport_src.hxx \
MEDMEM_MedVersion.hxx \
MEDMEM_Compatibility21_22.hxx \
MEDMEM_MedFieldDriver21.hxx \
MEDMEM_MedMeshDriver21.hxx \
MEDMEM_MedMedDriver21.hxx \
MEDMEM_PolyhedronArray.hxx \
MEDMEM_MedFieldDriver22.hxx \
MEDMEM_MedMedDriver22.hxx \
MEDMEM_MedMeshDriver22.hxx \
MEDMEM_TopLevel.hxx \
MEDMEM_Utilities.hxx \
MEDMEM_ArrayInterface.hxx \
MEDMEM_IndexCheckingPolicy.hxx \
MEDMEM_InterlacingPolicy.hxx \
MEDMEM_InterlacingTraits.hxx \
MEDMEM_nArray.hxx \
MEDMEM_Tags.hxx \
MEDMEM_FieldConvert.hxx \
MEDMEM_ArrayConvert.hxx \
MEDMEM_FieldForward.hxx \
MEDMEM_GaussLocalization.hxx \
MEDMEM_SetInterlacingType.hxx\
MEDMEM_ConnectZone.hxx \
MEDMEM_EnsightMedDriver.hxx \
MEDMEM_EnsightMeshDriver.hxx \
MEDMEM_EnsightFieldDriver.hxx \
MEDMEM.hxx \
MEDMEM_OptionManager.hxx \
MEDMEM_EnsightUtils.hxx

# not exported headers
EXTRA_DIST+= DataTest \
MEDMEM_MEDMEMchampLire.hxx \
MEDMEM_MEDMEMgaussEcr.hxx \
MEDMEM_MEDMEMprofilEcr.hxx \
MEDMEM_Formulae.hxx

dist_libmedmem_la_SOURCES= \
MEDMEM_Init.cxx \
MEDMEM_CellModel.cxx \
MEDMEM_Connectivity.cxx \
MEDMEM_Coordinate.cxx \
MEDMEM_DriversDef.cxx \
MEDMEM_DriverFactory.cxx \
MEDMEM_Family.cxx \
MEDMEM_Field.cxx \
MEDMEM_GenDriver.cxx \
MEDMEM_Group.cxx \
MEDMEM_Med.cxx \
MEDMEM_Exception.cxx \
MEDMEM_MedMedDriver.cxx \
MEDMEM_MedMeshDriver.cxx \
MEDMEM_GibiMeshDriver.cxx \
MEDMEM_PorflowMeshDriver.cxx \
MEDMEM_SkyLineArray.cxx \
MEDMEM_Mesh.cxx \
MEDMEM_Meshing.cxx \
MEDMEM_Support.cxx \
MEDMEM_Unit.cxx \
MEDMEM_VtkMedDriver.cxx \
MEDMEM_VtkMeshDriver.cxx \
MEDMEM_Grid.cxx \
MEDMEM_MedVersion.cxx \
MEDMEM_Compatibility21_22.cxx \
MEDMEM_MedMeshDriver21.cxx \
MEDMEM_MedMedDriver21.cxx \
MEDMEM_medimport_src.cxx \
MEDMEM_PolyhedronArray.cxx \
MEDMEM_MedMedDriver22.cxx \
MEDMEM_MedMeshDriver22.cxx \
MEDMEM_TopLevel.cxx \
MEDMEM_ConnectZone.cxx \
MEDMEM_EnsightFieldDriver.cxx \
MEDMEM_EnsightUtils.cxx \
MEDMEM_EnsightMedDriver.cxx \
MEDMEM_EnsightMeshDriver.cxx \
MEDMEM_DriverTools.cxx \
MEDMEM_GaussLocalization.cxx


#libmedmem_la_LDFLAGS= -L$(top_builddir)/lib@LIB_LOCATION_SUFFIX@/salome 
# libmedmem_la_CPPFLAGS= $(MED2_INCLUDES) $(HDF5_INCLUDES) @CXXTMPDPTHFLAGS@
libmedmem_la_CPPFLAGS= $(MED2_INCLUDES) $(HDF5_INCLUDES) \
	-I$(srcdir)/../MEDWrapper/Base \
	-I$(srcdir)/../MEDWrapper/V2_1/Core -I$(srcdir)/../INTERPOLATION
libmedmem_la_CXXFLAGS= @CXXTMPDPTHFLAGS@

# change motivated by the bug KERNEL4778.
libmedmem_la_LDFLAGS=$(MED2_LIBS) $(HDF5_LIBS) ../MEDWrapper/V2_1/Core/libmed_V2_1.la \
	../MEDWrapper/Base/libMEDWrapperBase.la $(STDLIB)


AM_CPPFLAGS= $(libmedmem_la_CPPFLAGS)
AM_CXXFLAGS= $(libmedmem_la_CXXFLAGS)
LDADD= $(libmedmem_la_LDFLAGS) -lm libmedmem.la

OBSOLETE_FILES = \
	MEDMEM_MEDMEMchampLire.cxx \
	MEDMEM_MEDMEMgaussEcr.cxx \
	MEDMEM_MEDMEMprofilEcr.cxx \
	MEDMEM_TypeMeshDriver.cxx \
	MEDMEM_TypeMeshDriver.hxx \
	checkScript

EXTRA_DIST += $(OBSOLETE_FILES)
