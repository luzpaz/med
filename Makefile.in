# -* Makefile *- 
#
# Author : Patrick GOLDBRONN (CEA)
# Date : 28/06/2001
# $Header$
#

# source path
top_srcdir=@top_srcdir@
top_builddir=.
srcdir=@srcdir@
VPATH=.:@srcdir@:@top_srcdir@/bin:@top_srcdir@/resources:./bin:@top_srcdir@/idl


@COMMENCE@

SUBDIRS = idl src

RESOURCES_FILES = \
Med_en.xml \
Data.png \
Infos.png \
Structure.png \
ModuleMed.png

BIN_SCRIPT=


# copy header files in common directory
ifeq ($(HAVE_SSTREAM),yes)
  include_list=include/salome/SALOMEconfig.h
else
  include_list=include/salome/SALOMEconfig.h include/salome/sstream
endif

inc: idl $(include_list)

include/salome/SALOMEconfig.h: salome_adm/unix/SALOMEconfig.h
	-$(RM) $@
	$(LN_S) ../../$< $@

include/salome/sstream: salome_adm/unix/sstream
	-$(RM) $@
	$(LN_S) ../../$< $@

depend: depend_idl

depend_idl:
	(cd idl ; $(MAKE) $@) || exit 1

# doc is already build : if you want to had documents, go manually to doc and run 'make doc'
#doc:
#	(cd doc && $(MAKE) $@) || exit 1

install-end:
# finish libtool install
#	@$(LT) --mode=finish $(libdir)

install-include: $(include_list)
	$(INSTALL) -d  $(includedir)
	@for f in X $(include_list); do				\
	   if test $$f != X; then				\
	     ($(INSTALL_DATA) $$f $(includedir)/. || exit 1);	\
	   fi;							\
	done

# install script in $(bindir) :
install-bin: $(BIN_SCRIPT)
	$(INSTALL) -d  $(bindir)
	if test $(BIN_SCRIPT)X != X; then 			\
		$(INSTALL_PROGRAM) $^ $(bindir);		\
	fi

uninstall: uninstall-idl

uninstall-idl:
	$(RM) $(idldir)/*.idl

distclean: distclean-other

distclean-other:
	-$(RM) salome_adm/unix/*~ salome_adm/unix/*% salome_adm/unix/*.bak salome_adm/unix/*.new salome_adm/unix/*.old
	-$(RM) salome_adm/unix/make_* 
	-$(RM) salome_adm/unix/depend salome_adm/unix/SALOMEconfig.h 
	-$(RM) config.cache config.log config.status 

@MODULE@

install: install-bin install-include install-end

